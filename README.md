# Human-Gibbs-Sampler Comparison

Human-Gibbs is a website and set of gibbs sampler methods to compare
human-generated sorting step data with gibbs sampler steps.

Must have the following python packages installed in order to the webserver. The
packages can be found on PIP.
* flask
* pymongo

## Data storage format
There are two collections in the mongo database: `trials` and `image_sets`

### Trials

A trial is recorded by saving the initial state, the sequence of moves that the
user makes, and a reference to the image set the trial is using. The fields for
a trial are `'init_state'`, `'moves'`, `'image_set'`, and of course `'_id'`.
Trials will be referred to by the document ID generated by Mongo.
The `'image_set'` field holds a DBRef to the document in `images`
collection stores holds the images used.

#### State 

The state is defined by a list of all the objects on the board. Each object has
the fields `'id'`, `'group'`, `'x'`, `'y'`. The `'id'` field is unique within
the trial and is linked with the image representing the object. The `'group'`
field can be `None` if it is unassigned. An sample object is shown below:

```python
{'id': 34,
 'group': 3,
 'x': 25,
 'y': 193}
```

Only the initial state is stored in the trial's Mongo document, but the state at
any point can be reconstructed by the list of moves.

#### Moves
A move is defined the fields `'id'`, `'old_group'`, `'new_group'`, `'old_x'`,
`'new_x'`, `'old_y'`, `'new_y'`, `'time_elapsed'`.  The `'id'` field refers to
the object that was moved, the "old" keys refer to the state of the object
before the move, the "new" keys refer to the state of the objects after the
move, and `'time_elapsed'` refers to the time that the user took to make the
move. 

### Image Sets

Each document in the images collection is simply composed of a `'name'` field
and an `'image_ids'` field. The `'image_ids'` field is a list of ObjectIds in
the GridFS system; to get the appropriate image need to run `fs.get(id)` from
a GridFS object created for the 'human-gibbs' db
